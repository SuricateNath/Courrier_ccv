<body>
  <div class="container-fluid">
    <nav class="navbar navbar-inverse navbar-static-top nav nav-pills flex-column flex-sm-row">
      <h2 class="title text-center" style=" display: inline; font-size: 0.95em:">CCV Friville - Gestion des notess reçus</h2>       
    </nav> 
    <div class="row">
      <div class="col-sm-12 ">
          <h2 class="text-center title2"> Nouvel enregistrement</h2>
      </div>
    </div>
    {{> form_new_notes}}
    <div class="row">
      <div class="col-sm-12 ligne1"> &nbsp;</div>
    </div>

    <div class="row">
      <div class="col-sm-12" >
        {{> list_notes}}    
      </div>
    </div>

    <footer>
      <div class="row "> 
        <div class="col-sm-12 text-center">
          CCV Friville Escarbotin - Version 1.0 / Avril 2018
        </div> 
      </div>
    </footer>
      <!--fin de container -->  
  </div>
</body>

<template name="form_search_notes">
  <div class="form-group row title3"> 
        <div class="col-sm-12 text-center">
          <input type="text" name="search" placeholder="Elément a rechercher" class="form-control">
        </div> 
      </div> 
</template>

<template name="form_new_notes" id="idform"> 
  <div class="row">
    <div class="col-sm-12">
      <div class="panel panel-default">
        <div class="panel-body">

            <form class="js-new-note">

              <div class="form-group row">
                  <label class="col-sm-1 col-sm-form-label">Date</label>
                  <label class="col-sm-2 col-sm-form-label">Expéditeur</label>
                  <label class="col-sm-2 col-sm-form-label">Destinataire</label>
                  <label class="col-sm-2 col-sm-form-label">Objet</label>
                  <label class="col-sm-1 col-sm-form-label">Limite Rep.</label>
                  <label class="col-sm-3 col-sm-form-label">Observations</label>
                  <label class="col-sm-1 col-sm-form-label">&nbsp;</label>
              </div>

              <div class="form-group row">
                <div class="col-sm-1" style="width:160px;"><input class="form-control" id="idexp" type="date" name="date" placeholder="jj/mm/aaaa"></div>
                <div class="col-sm-2"><input class="form-control" type="text" name="exp" placeholder="Expediteur"></div>
                <div class="col-sm-2"><input class="form-control" type="text" name="dest" placeholder="Destinataire"></div>
                <div class="col-sm-2"><input class="form-control" type="text" name="objet" placeholder="Objet"></div>
                <div class="col-sm-1" style="width:160px;"><input class="form-control" type="date" dateformat="dmy" placeholder="jj/mm/aaaa" name="deadline"  ></div>
                <div class="col-sm-3" style="width:350px;"><input class="form-control" name="obs" type="text" placeholder="Observations"></div>
                <div class="col-sm-1" style="width:90px;"><button class="btn btn-primary submit" type="submit" name="submit">Ajouter</button></div>        
              </div>
             <input class="form-control" name="traite" type="hidden" >
            </form>
        </div>
      </div>
    </div>
  </div>
</template>
 
<template name="list_notes">

   <div class="row"> 
      <div class="col-sm-8">
        <h2 class="text-center title3"> Liste des courriers reçus : {{count}} </h2> 
      </div>  
      <div class="col-sm-4">
          {{> form_search_notes }} 
      </div> 
    </div>
    <div class="row">
      <div class="col-sm-12 ligne2"> &nbsp;</div>
    </div>
 <div class="row text-center">
      <div class="col-xs-12 col-lg-4"> 
        <h4>Réponse du jour: {{todayCount}} <button type="bouton" id="btn4" class="btn"> Afficher</button></h4>
      </div>
      <div class="col-xs-12 col-lg-4">
        <h4>Réponse dépassée: {{deadlineCount}} <button type="bouton" id="btn3" class="btn"> Afficher</button></h4>
      </div>    
       <div class="col-xs-12 col-lg-4">
        <h4>En attente de réponse: {{incompleteCount}} &nbsp; <button type="bouton" id="btn2" class="btn"> Afficher</button></h4> 
      </div>
  </div>

  <!-- entete de la liste -->
   <ul class="list-inline js-edit-note" style="background-color: #f4f6f6;">
    
    <li class="list-inline-item l2"><b>Date</b></li>
    <li class="list-inline-item l3"><b>Expéditeur</b></li>
    <li class="list-inline-item l4"><b>Destinataire</b></li>
    <li class="list-inline-item l5"><b>Objet</b></li>
    <li class="list-inline-item l6"><b>Limite Rep.</b></li>
    <li class="list-inline-item l7"><b>Observations</b></li>
    <li class="list-inline-item l8"><b>Traité</b></li>
  
  </ul>

  {{#each note in notes}}

    <div class="row">
      <div class="col-xs-12 ligne2"> &nbsp;</div>
    </div>

    {{> single_notes note=note}} <!-- ici le 1er "notes" est le nom du paramètre à afficher et le second fait référence à "each notes" -->

    {{else}}
    <h3> Aucun enregistrement à afficher !</h3>
  {{/each}}

  <hr>
  
</template>


<template name="single_notes">
  <ul class="list-inline js-edit-note list-notes" style="cursor: pointer;">  
    <li class="list-inline-item l2">{{note.date}}</li>
    <li class="list-inline-item l3">{{note.exp}}</li>
    <li class="list-inline-item l4">{{note.dest}}</li>
    <li class="list-inline-item l5">{{note.objet}}</li>
    <li class="list-inline-item l6">{{note.deadline}}</li>
    <li class="list-inline-item l7">{{note.obs}}</li>
    <li class="list-inline-item l8">{{note.traite}}</li>   
  </ul>
</template>

<template name="modal_edit_note"> 
  <div class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">     
      <div class="modal-body">

           <form class="js-edit-note">   
            <input class="form-control" type="hidden" name="_id" value="{{note._id}}" >
             
            <div class="input-group-prepend">
              <span class="input-group-text">Date Enreg.</span>
              <input class="form-control" type="text" name="date" value="{{note.date}}" >  <br>
                        
              <span class="input-group-text">Expediteur</span>
              <input class="form-control" type="text" name="exp" placeholder="Expediteur"  value="{{note.exp}}" >   <br>

              <span class="input-group-text">Objet</span>
              <input class="form-control" type="text" name="objet" placeholder="Objet"  value="{{note.objet}}"> <br>
             
              <span class="input-group-text">Destinataire</span>
              <input class="form-control" type="text" name="dest" placeholder="Destinataire"  value="{{note.dest}}">  <br>
            
              <span class="input-group-text">Observations</span>
              <textarea class="form-control resize-vertical" name="obs" placeholder="Observations" cols="80" rows="4">{{note.obs}} </textarea><br>
            
              <span class="input-group-text">Date limite de réponse</span>
              <input class="form-control" type="text" name="deadline"  value="{{note.deadline}}"> <br>

              <span class="input-group-text">Traité</span>
              <input class="form-control" type="date" name="traite"  value="{{note.traite}}">  <br>
            </div>

            <div class="modal-footer" >
              <button class="btn btn1" type="button"  data-dismiss="modal">Retour</button>
              <button class="btn btn1" type="submit" name="update" data-dissmiss="modal" >Sauvegarder</button>                    
              <button class="btn btn1 js-delete-note" type="button" name="delete" data-dissmiss="modal">Supprimer</button>
            </div>
          </form>
        </div>     
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
</template>

   <!-- 
      <div class="col-sm-3">
        {{> encours}}
      </div>
      <div class="col-sm-3 ">
        {{> actuel}}
      </div>
      <div class="col-sm-3">
        {{> depasse}}
      </div>
    </div>
  -->
